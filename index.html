<!doctype html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>Dossier: Aristia Firlin</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Courier+Prime:ital,wght@0,400;0,700;1,400&family=Playfair+Display:ital,wght@0,900;1,900&family=Special+Elite&family=EB+Garamond:ital,wght@0,400;0,700;1,400;1,700&display=swap');
        
        :root {
            --paper: #f2ecd9;
            --ink: #1a1a1a;
            --accent: #8b0000;
        }

        body {
            background-color: #050505;
            font-family: 'Courier Prime', monospace;
            color: var(--ink);
            overflow: hidden;
            overscroll-behavior: none;
        }

        /* --- CONSTELLATION LOADING --- */
        #constellation-loader {
            position: fixed;
            inset: 0;
            background: #000;
            z-index: 600;
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: #fff;
            opacity: 0;
            transition: opacity 0.5s ease;
        }

        .star { fill: #fff; filter: drop-shadow(0 0 3px #fff); }
        .const-line { stroke: rgba(255,255,255,0.3); stroke-width: 1; stroke-dasharray: 100; stroke-dashoffset: 100; animation: drawLine 2s ease forwards; }
        
        @keyframes drawLine { to { stroke-dashoffset: 0; } }
        @keyframes starTwinkle { 0%, 100% { opacity: 0.4; transform: scale(0.8); } 50% { opacity: 1; transform: scale(1.2); } }
        .twinkle { animation: starTwinkle 1.5s infinite ease-in-out; }

        /* --- SCANLINE LOGIN --- */
        #scanning-line {
            position: absolute; width: 100%; height: 3px;
            background: linear-gradient(to bottom, transparent, var(--accent), transparent);
            top: -10px; z-index: 100;
            box-shadow: 0 0 20px var(--accent);
            display: none;
            pointer-events: none;
        }
        
        .scanning-active #scanning-line {
            display: block;
            animation: scanLoop 2.8s cubic-bezier(0.4, 0, 0.2, 1) infinite;
        }

        @keyframes scanLoop {
            0% { top: 0%; opacity: 0; }
            15% { opacity: 1; }
            85% { opacity: 1; }
            100% { top: 100%; opacity: 0; }
        }

        /* --- AUTH SCREEN --- */
        #auth-module {
            background: #000;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 500;
            position: fixed;
            inset: 0;
            transition: opacity 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .terminal-container { width: 90%; max-width: 400px; text-align: center; }

        .init-btn {
            border: 1px solid #444; color: #888; padding: 15px 30px;
            text-transform: uppercase; letter-spacing: 5px; font-size: 10px;
            cursor: pointer; transition: all 0.5s; background: transparent;
        }

        .decode-interface { display: none; }

        /* --- MAIN CONTAINER --- */
        .paper-container {
            background-color: var(--paper);
            background-image: url("https://www.transparenttextures.com/patterns/natural-paper.png");
            box-shadow: inset 0 0 80px rgba(0,0,0,0.1), 0 20px 50px rgba(0,0,0,0.8);
            height: 94vh; width: 100%; max-width: 420px;
            position: relative; display: flex; flex-direction: column; overflow: hidden;
            margin: auto;
        }

        .page-module {
            display: none; opacity: 0; height: 100%;
            flex-direction: column; padding: 1.5rem;
            overflow-y: auto;
            transition: opacity 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
        }

        /* Victorian Wallpaper for specific pages */
        .victorian-bg::before {
            content: "";
            position: absolute;
            inset: 0;
            background-image: url("https://www.transparenttextures.com/patterns/damask.png");
            opacity: 0.08;
            pointer-events: none;
            z-index: 0;
        }

        .page-module.active { display: flex; opacity: 1; }

        /* NAV ZONE */
        .nav-zone { position: absolute; top: 0; bottom: 0; width: 20%; z-index: 40; cursor: pointer; }
        .nav-left { left: 0; }
        .nav-right { right: 0; }

        .page-module > * { position: relative; z-index: 1; }

        /* --- EVIDENCE FORM --- */
        .evidence-form {
            border: 1px solid #333;
            padding: 1.25rem;
            position: relative;
            background: rgba(255,255,255,0.3);
            height: 75%;
            display: flex;
            flex-direction: column;
        }

        .status-strip-visual {
            margin-top: 1rem;
            height: calc(25% - 2rem);
            border: 1px dashed rgba(0,0,0,0.2);
            position: relative;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(0,0,0,0.03);
        }

        .binary-rain {
            position: absolute;
            font-size: 8px;
            color: rgba(0,0,0,0.05);
            line-height: 1;
            word-break: break-all;
            top: 0; left: 0; right: 0; bottom: 0;
            padding: 5px;
            user-select: none;
        }

        .passed-stamp {
            border: 3px double #1a4a1a;
            color: #1a4a1a;
            padding: 4px 12px;
            font-weight: 900;
            font-size: 14px;
            transform: rotate(-5deg);
            z-index: 5;
            background: rgba(242, 236, 217, 0.8);
            letter-spacing: 2px;
        }

        .photo-clip-container { position: absolute; top: -12px; right: 12px; z-index: 20; }
        .clip-on { width: 22px; height: 40px; background: url('https://img.icons8.com/ios-filled/50/000000/paper-clip.png') no-repeat; background-size: contain; position: absolute; top: -4px; left: 50%; transform: translateX(-50%); z-index: 30; }
        .photo-3x4 { width: 85px; height: 113px; background: #fff; padding: 3px; border: 1px solid #999; box-shadow: 3px 3px 8px rgba(0,0,0,0.2); transform: rotate(2deg); }
        .photo-3x4 img { width: 100%; height: 100%; object-fit: cover; }
        
        .form-row { margin-bottom: 0.5rem; border-bottom: 1px dotted rgba(0,0,0,0.2); display: flex; align-items: baseline; font-size: 10.5px; line-height: 1.4; }
        .label { font-weight: bold; width: 85px; text-transform: uppercase; color: #666; font-size: 9px; }
        .value { flex: 1; color: var(--ink); font-weight: bold; }
        
        .stamp-container-v2 {
            margin-top: auto;
            padding-bottom: 15px;
            display: flex;
            justify-content: space-between;
            align-items: flex-end;
            position: relative;
        }

        .round-stamp {
            width: 75px;
            height: 75px;
            border: 2px dashed #8b0000;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            color: #8b0000;
            font-weight: 900;
            font-size: 7px;
            text-transform: uppercase;
            transform: rotate(-15deg);
            opacity: 0.6;
            position: relative;
        }

        .round-stamp::after {
            content: "TOP SECRET";
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 9px;
            border-top: 1px solid #8b0000;
            border-bottom: 1px solid #8b0000;
            padding: 2px 0;
            width: 120%;
            background: var(--paper);
        }

        .fingerprint-zone {
            width: 50px;
            height: 60px;
            opacity: 0.25;
            filter: grayscale(1) contrast(1.5);
            margin-right: 10px;
        }

        .barcode-strip {
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 100%;
            height: 20px;
            opacity: 0.15;
            background: repeating-linear-gradient(90deg, #000, #000 1px, transparent 1px, transparent 4px);
        }

        /* --- NYT STYLE HEADLINE --- */
        .nyt-lead {
            font-family: 'EB Garamond', serif;
            font-size: 1.45rem;
            line-height: 1.2;
            font-weight: 700;
            margin-bottom: 1.25rem;
            text-align: left;
            color: #000;
        }

        .nyt-lead::first-letter {
            float: left;
            font-size: 4.5rem;
            line-height: 0.8;
            margin-top: 0.1em;
            margin-right: 0.1em;
            font-family: 'Playfair Display', serif;
            font-weight: 900;
        }

        .quote-block {
            margin: 1.5rem 0;
            padding: 1rem;
            border-left: 2px solid var(--accent);
            background: rgba(139, 0, 0, 0.03);
            font-style: italic;
            font-family: 'EB Garamond', serif;
            font-size: 1.1rem;
            color: #555;
        }

        .reel-btn { display: block; padding: 10px 12px; background: #fff; border: 1px solid rgba(0,0,0,0.15); text-align: center; color: var(--accent); font-size: 10px; font-weight: bold; letter-spacing: 0.15em; animation: soft-pulse 3.5s infinite ease-in-out; }
        @keyframes soft-pulse { 0% { transform: scale(1); } 50% { transform: scale(1.02); } 100% { transform: scale(1); } }
        
        .date-highlight { background: var(--accent); color: white; border-radius: 9999px; font-weight: bold; transform: scale(1.1); position: relative; }
        .active .date-highlight { animation: pulse-date 2.2s infinite ease-in-out; }
        @keyframes pulse-date { 0% { box-shadow: 0 0 0 0 rgba(139, 0, 0, 0.6); } 70% { box-shadow: 0 0 0 8px rgba(139, 0, 0, 0); } 100% { box-shadow: 0 0 0 0 rgba(139, 0, 0, 0); } }
        
        #typewriter-output { 
            white-space: pre-wrap; 
            font-family: 'Special Elite', cursive; 
            line-height: 1.8; 
            color: #444; 
            font-size: 13px; 
            text-align: left;
            min-height: 220px;
        }
        
        /* --- CHAT SYSTEM --- */
        #msg-display { background: rgba(0,0,0,0.03); padding: 1rem; flex: 1; overflow-y: auto; display: flex; flex-direction: column; gap: 8px; }
        .message-bubble { padding: 8px 12px; max-width: 80%; font-size: 11px; }
        .msg-n { align-self: flex-start; background: #fff; border-left: 4px solid var(--accent); border-radius: 0 8px 8px 8px; }
        .msg-aristia { align-self: flex-end; background: #222; color: #fff; border-radius: 8px 0 8px 8px; }
        
        .identity-toggle { display: flex; background: rgba(0,0,0,0.08); padding: 3px; margin-bottom: 10px; width: fit-content; border-radius: 4px; }
        .toggle-btn { padding: 4px 15px; font-size: 10px; cursor: pointer; border-radius: 2px; }
        .toggle-btn.active { background: var(--accent); color: white; }
        
        .custom-modal { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.9); z-index: 2000; align-items: center; justify-content: center; }

        /* --- NAV ELEMENTS --- */
        #back-nav-btn {
            cursor: pointer;
            padding: 2px 6px;
            border: 1px solid rgba(139, 0, 0, 0.3);
            background: rgba(139, 0, 0, 0.05);
            color: var(--accent);
            display: none;
            margin-right: 10px;
        }
        #center-stamp { display: inline-block; }

        /* --- CALENDAR DATA VISUAL --- */
        .radar-box {
            margin-top: 1.5rem;
            border-top: 1px solid rgba(0,0,0,0.1);
            padding-top: 1rem;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        .data-readout {
            font-size: 7.5px;
            color: #666;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 5px;
            font-family: 'Courier Prime', monospace;
        }
        .monitor-line {
            height: 30px;
            background: linear-gradient(90deg, transparent 0%, rgba(139, 0, 0, 0.1) 50%, transparent 100%);
            position: relative;
            border-left: 2px solid var(--accent);
            overflow: hidden;
        }
        .monitor-line::after {
            content: "";
            position: absolute;
            left: 0; top: 50%;
            width: 100%;
            height: 1px;
            background: rgba(139, 0, 0, 0.2);
        }
        .wave-pulse {
            position: absolute;
            width: 10px;
            height: 100%;
            background: var(--accent);
            opacity: 0.3;
            animation: movePulse 3s linear infinite;
        }
        @keyframes movePulse {
            0% { left: -10%; }
            100% { left: 110%; }
        }

        /* --- PAGE 3: SURPRISE CANDLE & TYPEWRITER --- */
        #candle-stage {
            position: absolute;
            inset: 0;
            background: #050505;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 100;
            transition: opacity 1s;
        }
        .candle {
            width: 20px;
            height: 60px;
            background: #fff;
            position: relative;
            border-radius: 2px;
            box-shadow: 0 0 20px rgba(255,255,255,0.1);
        }
        .flame {
            width: 12px;
            height: 25px;
            background: #ff9800;
            position: absolute;
            top: -22px;
            left: 50%;
            transform: translateX(-50%);
            border-radius: 50% 50% 20% 20%;
            animation: flicker 0.1s infinite alternate;
            box-shadow: 0 0 15px #ff9800, 0 0 30px #ff5722;
            cursor: pointer;
        }
        @keyframes flicker {
            0% { transform: translateX(-50%) scale(1); }
            100% { transform: translateX(-50%) scale(1.1) skew(2deg); }
        }
        .candle-glow {
            position: absolute;
            width: 200px;
            height: 200px;
            background: radial-gradient(circle, rgba(255,152,0,0.15) 0%, transparent 70%);
            top: -90px;
            pointer-events: none;
        }
        .candle-hint {
            color: #444;
            font-size: 8px;
            margin-top: 40px;
            letter-spacing: 2px;
            text-transform: uppercase;
        }

        .wax-seal-decoration {
            margin-top: 15px;
            display: flex;
            flex-direction: column;
            align-items: center;
            opacity: 0;
            transition: opacity 1.5s;
        }
        .red-ribbon {
            width: 2px;
            height: 30px;
            background: #8b0000;
            position: relative;
        }
        .wax-seal {
            width: 35px;
            height: 35px;
            background: #8b0000;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 2px 2px 5px rgba(0,0,0,0.3);
            border: 2px solid #630101;
            position: relative;
            margin-top: -5px;
        }
        .wax-seal::after {
            content: "17";
            color: #630101;
            font-weight: bold;
            font-size: 14px;
            font-family: 'Playfair Display';
        }

        .verification-grid {
            margin-top: 20px;
            width: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 30px; 
            opacity: 0.6;
            padding: 0 10px;
        }
        .bio-info { display: flex; flex-direction: column; gap: 3px; text-align: right; }
        .bio-row { font-size: 6.5px; text-transform: uppercase; letter-spacing: 0.5px; color: #666; display: flex; justify-content: flex-end; gap: 6px; }
        .bio-val { font-weight: bold; color: var(--accent); }
        
        .retro-qr-graphic {
            width: 40px;
            height: 40px;
            background-image: linear-gradient(90deg, #000 25%, transparent 25%, transparent 75%, #000 75%), linear-gradient(#000 25%, transparent 25%, transparent 75%, #000 75%);
            background-size: 10px 10px; border: 1px solid #ddd; position: relative;
        }
        .retro-qr-graphic::after { content: ""; position: absolute; inset: 10px; background: #8b0000; opacity: 0.2; }

        .footer-shred {
            width: 100%; height: 40px; margin-top: 15px;
            background: repeating-linear-gradient(90deg, transparent, transparent 10px, rgba(0,0,0,0.03) 10px, rgba(0,0,0,0.03) 11px);
            border-top: 1px solid rgba(0,0,0,0.05); mask-image: linear-gradient(to bottom, black, transparent);
        }

        /* --- PAPER TEAR & VINTAGE EFFECTS --- */
        .torn-paper {
            position: relative;
            background: #fff;
            box-shadow: 2px 3px 10px rgba(0,0,0,0.2);
        }
        .torn-paper::before, .torn-paper::after {
            content: '';
            position: absolute;
            left: 0;
            width: 100%;
            height: 10px;
            background-size: 20px 20px;
            background-repeat: repeat-x;
        }
        .torn-top::before {
            top: -8px;
            background-image: linear-gradient(135deg, transparent 75%, #fff 75%), linear-gradient(-135deg, transparent 75%, #fff 75%);
        }
        .torn-bottom::after {
            bottom: -8px;
            background-image: linear-gradient(45deg, transparent 75%, #fff 75%), linear-gradient(-45deg, transparent 75%, #fff 75%);
        }
        
        .tape-strip {
            position: absolute;
            width: 80px;
            height: 25px;
            background: rgba(255, 255, 255, 0.4);
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            transform: rotate(-5deg);
            z-index: 20;
            backdrop-filter: blur(1px);
            border-left: 1px solid rgba(255,255,255,0.3);
            border-right: 1px solid rgba(255,255,255,0.3);
        }

        .scrap-text {
            font-family: 'Special Elite', cursive;
            background: #eee;
            padding: 2px 6px;
            transform: rotate(2deg);
            display: inline-block;
            box-shadow: 1px 1px 3px rgba(0,0,0,0.2);
            font-size: 9px;
            color: #333;
            border: 1px dashed #999;
        }

        .newspaper-fragment {
            position: absolute;
            background: #e3dac9;
            padding: 8px;
            font-family: 'Playfair Display', serif;
            font-size: 6px;
            line-height: 1.2;
            color: #222;
            width: 100px;
            box-shadow: 2px 2px 5px rgba(0,0,0,0.15);
            overflow: hidden;
            text-align: justify;
            opacity: 0.9;
            z-index: 5;
        }
        .newspaper-fragment h4 {
            font-weight: 900;
            text-transform: uppercase;
            border-bottom: 1px solid #000;
            margin-bottom: 4px;
            font-size: 8px;
        }

        /* --- FLASH EFFECT --- */
        #flash-overlay { position: fixed; inset: 0; background: #fff; opacity: 0; z-index: 200; pointer-events: none; }
        .flash-active { animation: flashAnim 0.8s ease-out forwards; }
        @keyframes flashAnim { 0% { opacity: 1; } 10% { opacity: 0; } 20% { opacity: 0.8; } 100% { opacity: 0; } }
    </style>
  </head>
  <body class="flex items-center justify-center min-h-screen">

    <div id="flash-overlay"></div>

    <!-- Animasi Rasi Bintang Sagittarius Loading -->
    <div id="constellation-loader">
        <svg viewBox="0 0 200 200" width="180" height="180" class="mb-4">
            <g class="twinkle">
                <circle cx="100" cy="40" r="2" class="star" />
                <circle cx="120" cy="70" r="2" class="star" />
                <circle cx="110" cy="110" r="2" class="star" />
                <circle cx="70" cy="90" r="2" class="star" />
                <circle cx="150" cy="60" r="2" class="star" />
                <circle cx="140" cy="95" r="2" class="star" />
            </g>
            <path d="M100 40 L120 70 L110 110 L70 90 L120 70 M120 70 L150 60 L140 95 L110 110" fill="none" class="const-line" />
        </svg>
        <p class="text-[9px] uppercase tracking-[0.4em] opacity-60">Aligning Sagittarius...</p>
    </div>

    <!-- Modal Purge -->
    <div id="delete-modal" class="custom-modal">
        <div class="bg-[#f2ecd9] p-6 max-w-xs w-full border-t-8 border-red-900 text-center shadow-2xl relative z-50">
            <h3 class="font-bold uppercase text-[10px] tracking-widest mb-2">Penghancuran Berkas?</h3>
            <p class="text-[9px] mb-6 opacity-70">Log transmisi akan dihapus secara permanen.</p>
            <div class="flex gap-4">
                <button onclick="DossierSystem.closeModal()" class="flex-1 py-2 border border-black text-[9px] uppercase">Abort</button>
                <button onclick="DossierSystem.confirmPurge()" class="flex-1 py-2 bg-red-900 text-white text-[9px] uppercase">Execute</button>
            </div>
        </div>
    </div>

    <!-- Login Auth -->
    <div id="auth-module" class="scanning-active">
        <div id="scanning-line"></div>
        <div id="init-screen" class="terminal-container">
            <button class="init-btn" onclick="DossierSystem.showPin()">Access Archive</button>
        </div>
        <div id="pin-screen" class="terminal-container decode-interface">
            <input type="password" id="pin-field" maxlength="6" class="w-full bg-transparent border-b border-red-900 text-center text-4xl text-red-700 outline-none tracking-[0.5em] py-2" placeholder="******">
            <p class="text-[9px] mt-6 text-white/40 tracking-widest uppercase">Hint: 300326</p>
        </div>
    </div>

    <main class="paper-container">
        <div id="nav-l" class="nav-zone nav-left" onclick="DossierSystem.prev()"></div>
        <div id="nav-r" class="nav-zone nav-right" onclick="DossierSystem.next()"></div>

        <div id="module-viewport" class="flex-1 relative overflow-hidden">
            
            <!-- Halaman 0: Editorial -->
            <section class="page-module victorian-bg active" id="mod-0">
                <div class="absolute top-0 left-0 w-full h-full overflow-hidden pointer-events-none">
                    <div class="newspaper-fragment" style="top: 5%; right: -10px; transform: rotate(12deg); width: 80px; opacity: 0.4;">
                        <h4>BREAKING</h4>
                        <p>Sinyal misterius terdeteksi dari sektor 17.</p>
                    </div>
                    <div class="tape-strip" style="bottom: 10%; left: -10px; transform: rotate(45deg); width: 100px;"></div>
                </div>

                <div class="torn-paper torn-bottom p-6 shadow-xl relative bg-[#f9f7f1] mt-4 mx-2 rotate-[-1deg]">
                    <div class="tape-strip" style="top: -12px; left: 50%; transform: translateX(-50%) rotate(-2deg);"></div>
                    <div class="text-center mb-2 border-b-2 border-double border-black/20 pb-2">
                        <p class="text-[9px] uppercase tracking-[0.4em] opacity-50 font-serif">Special Issue: March 30, 2026</p>
                    </div>
                    <h1 class="text-5xl text-center my-4 font-black italic tracking-tighter leading-none" style="font-family: 'Playfair Display', serif;">The Ledger</h1>
                    
                    <div class="space-y-4 text-justify leading-relaxed relative z-10" style="font-family: 'EB Garamond', serif;">
                        <p class="nyt-lead text-[1.2rem]">
                            Tepat pada koordinat waktu yang telah ditentukan, <b>sayangku</b> secara resmi memasuki fase kedewasaan ke-17 tahun, menandai berakhirnya sebuah era dan dimulainya babak baru yang lebih krusial.
                        </p>
                        <p class="text-[1rem]">Laporan intelijen ini bukan sekadar arsip rutin, melainkan bukti otentik dari perjalanan panjang yang penuh makna. <b>Tujuh belas tahun</b> bukanlah sekadar angka dalam kalender, melainkan akumulasi dari setiap tawa, mimpi, dan keberanian yang telah kamu bentuk dengan indah, <b>sayangku</b>.</p>
                    </div>
                </div>

                <div class="relative mt-6 mx-4">
                    <div class="newspaper-fragment" style="top: -10px; left: -10px; transform: rotate(-3deg); width: 100%; background: #e8e4d9; z-index: 0;">
                        <div class="quote-block !m-0 !bg-transparent !border-none">
                            "Beberapa jiwa bersinar terlalu terang untuk sekadar dilewatkan oleh waktu; mereka adalah naskah yang ditulis oleh takdir."
                        </div>
                    </div>
                </div>
                
                <div class="mt-auto mb-8 p-4 relative">
                    <div class="torn-paper torn-top p-4 bg-white rotate-1 shadow-md">
                        <p class="text-[1rem] font-serif text-justify">Statusmu kini telah ditingkatkan menjadi <b>aset paling berharga</b> dalam sejarah operasional hidupku. Ketahuilah bahwa di setiap detak waktu yang berlalu, <b>sayangku</b> akan selalu menjadi pusat dari segala koordinat kebahagiaanku. Selamat datang di gerbang baru kehidupan.</p>
                        <div class="mt-4 border-t border-dashed border-black/30 pt-2 text-right">
                            <span class="scrap-text text-[8px]">REF: OPR-17-SWEET</span>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Halaman 1: Evidence -->
            <section class="page-module victorian-bg" id="mod-1">
                <div class="evidence-form torn-paper torn-bottom !border-none !bg-[#f4f1ea] shadow-2xl rotate-[1deg] !h-auto mb-4">
                    <div class="tape-strip" style="top: -10px; right: 20px; transform: rotate(15deg);"></div>
                    <div class="tape-strip" style="bottom: -10px; left: 20px; transform: rotate(-15deg);"></div>
                    
                    <div class="photo-clip-container" style="top: 10px; right: 10px;">
                        <div class="clip-on"></div>
                        <div class="photo-3x4 shadow-lg">
                            <img src="https://urcxbufxcebfgrsfvmsj.supabase.co/storage/v1/object/public/my%20pacar/Desain%20tanpa%20judul_20250821_003903_0000.jpg" alt="Sayangku" class="sepia-[0.2]">
                        </div>
                    </div>
                    
                    <div class="form-header border-b-2 border-black mb-4 pb-1">
                        <div class="text-[14px] font-black uppercase tracking-[0.1em] text-black font-serif">CONFIDENTIAL FILE</div>
                        <div class="text-[8px] font-mono">CASE ID: 017/AF-MAR</div>
                    </div>

                    <div class="mt-2 space-y-2 pr-[95px] font-mono text-[10px]">
                        <div class="bg-white/50 p-1 border-b border-dotted border-black/30 flex justify-between">
                            <span class="font-bold text-gray-500">SUBJECT:</span>
                            <span class="font-bold">ARISTIA FIRLIN</span>
                        </div>
                        <div class="bg-white/50 p-1 border-b border-dotted border-black/30 flex justify-between">
                            <span class="font-bold text-gray-500">CLASS:</span>
                            <span class="font-bold text-red-800">S-TIER ASSET</span>
                        </div>
                        <div class="bg-white/50 p-1 border-b border-dotted border-black/30 flex justify-between">
                            <span class="font-bold text-gray-500">AGE:</span>
                            <span class="font-bold">17 YEARS</span>
                        </div>
                        <div class="bg-white/50 p-1 border-b border-dotted border-black/30 flex justify-between">
                            <span class="font-bold text-gray-500">ORIGIN:</span>
                            <span class="font-bold">30/03/2009</span>
                        </div>
                    </div>
                    
                    <div class="mt-6 relative">
                        <div class="newspaper-fragment" style="top: -15px; left: -15px; transform: rotate(-5deg); z-index: 10;">
                            <h4>EVIDENCE #1</h4>
                            <p>Rekaman visual terenkripsi.</p>
                        </div>
                        <div class="bg-black/[0.04] p-3 border-2 border-dashed border-black/20 rounded-sm relative group bg-white">
                            <div class="flex justify-between items-center mb-2">
                                <p class="text-[8px] font-bold uppercase opacity-50">Encrypted Signal:</p>
                                <span class="text-[7px] font-mono text-red-800 bg-red-100 px-1 border border-red-200">LOCKED</span>
                            </div>
                            
                            <div id="video-container" class="hidden transition-all duration-500 ease-in-out">
                                <video controls class="w-full border border-black/10 shadow-sm" style="max-height: 120px; object-fit: cover;">
                                    <source src="https://urcxbufxcebfgrsfvmsj.supabase.co/storage/v1/object/public/my%20pacar/VID_20250808204246202.mp4" type="video/mp4">
                                    Your browser does not support the video tag.
                                </video>
                            </div>

                            <button id="decrypt-btn" onclick="document.getElementById('video-container').classList.remove('hidden'); this.style.display='none';" class="w-full py-3 border border-dashed border-black/30 bg-[#f0f0f0] hover:bg-white transition-colors flex flex-col items-center justify-center gap-1 cursor-pointer">
                                <span class="text-[9px] font-bold uppercase tracking-widest text-gray-700">Tap to Decrypt</span>
                            </button>
                        </div>
                    </div>

                    <div class="mt-4 p-2 bg-yellow-50 border border-yellow-100 text-justify relative">
                        <div class="tape-strip" style="top: -5px; left: 40%; width: 40px; height: 15px;"></div>
                        <p class="text-[9px] leading-relaxed text-gray-800 font-serif italic">
                            "Subjek menunjukkan perkembangan emosional yang signifikan. Prioritas pengawasan: MUTLAK."
                        </p>
                    </div>
                    
                    <div class="stamp-container-v2 mt-4">
                        <div class="round-stamp opacity-80 rotate-[-10deg]">
                            VERIFIED<br>BY N.<br>SECURE
                        </div>
                        <img src="https://img.icons8.com/ios/100/000000/fingerprint.png" class="fingerprint-zone opacity-40" alt="Fingerprint">
                        <div class="barcode-strip opacity-30"></div>
                    </div>
                </div>
            </section>

            <!-- Halaman 2: Clipping (New) -->
            <section class="page-module victorian-bg" id="mod-2">
                <h2 class="text-center font-bold text-[10px] uppercase mb-6 border-b pb-2 tracking-[0.2em]">Digital Clipping: Ext. Source</h2>
                
                <div class="relative bg-white p-2 shadow-lg rotate-1 border border-gray-300">
                    <div class="absolute -top-3 left-1/2 transform -translate-x-1/2 w-32 h-6 bg-yellow-100/80 border border-yellow-200/50 rotate-[-2deg] shadow-sm z-10"></div>
                    <div class="border border-black/10 p-4 bg-gray-50">
                        <p class="text-[8px] font-bold uppercase mb-3 text-center opacity-60 tracking-widest">Intercepted Signal: Instagram</p>
                        <a href="https://www.instagram.com/reel/DQEbbnuEj95/?igsh=MXJ0ejJ5amxsZW1y" target="_blank" class="block group relative overflow-hidden border border-black/20">
                            <div class="aspect-video bg-black/5 flex items-center justify-center group-hover:bg-black/10 transition-colors">
                                <div class="w-12 h-12 rounded-full bg-white/90 flex items-center justify-center shadow-sm group-hover:scale-110 transition-transform">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-pink-600" fill="currentColor" viewBox="0 0 24 24">
                                        <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/>
                                    </svg>
                                </div>
                                <span class="absolute bottom-2 text-[8px] font-bold bg-white/90 px-2 py-0.5 rounded-sm shadow-sm">TAP TO VIEW REEL</span>
                            </div>
                        </a>
                        <div class="mt-3 text-justify">
                            <p class="text-[9px] font-serif italic leading-relaxed text-gray-600">
                                "Visual evidence intercepted from public channels. Subject appears in high spirits. Archiving for sentimental analysis."
                            </p>
                        </div>
                    </div>
                </div>

                <div class="mt-8 relative">
                    <div class="absolute inset-0 flex items-center">
                        <div class="w-full border-t border-dashed border-black/20"></div>
                    </div>
                    <div class="relative flex justify-center">
                        <span class="bg-[#f2ecd9] px-2 text-[8px] text-gray-500 uppercase tracking-widest">End of Clipping</span>
                    </div>
                </div>
            </section>

            <!-- Halaman 3: Calendar (Shifted) -->
            <section class="page-module victorian-bg" id="mod-3">
                <h2 class="text-center font-bold text-[10px] uppercase mb-4 border-b pb-2 tracking-[0.2em] relative z-10">Logbook Operasional: Maret 2026</h2>
                
                <!-- Scrapbook Collage Area -->
                <div class="relative h-48 mb-4">
                    <!-- Background Scraps -->
                    <div class="newspaper-fragment" style="top: 10px; left: -10px; transform: rotate(-8deg);">
                        <h4>DAILY CHRONICLE</h4>
                        <p>Laporan cuaca menunjukkan kondisi cerah pada tanggal 30. Persiapan perayaan telah mencapai tahap akhir.</p>
                    </div>
                    <div class="newspaper-fragment" style="bottom: 20px; right: -5px; transform: rotate(5deg); width: 120px; background: #dcd0c0;">
                        <h4>ARCHIVE 017</h4>
                        <p>Dokumen rahasia ini diklasifikasikan sebagai prioritas utama. Jangan disebarluaskan tanpa izin otoritas tertinggi.</p>
                    </div>

                    <!-- Main Photo Clipping -->
                    <div class="absolute top-4 left-1/2 transform -translate-x-1/2 rotate-2 z-10">
                        <div class="tape-strip" style="top: -10px; left: 30%;"></div>
                        <div class="torn-paper torn-top torn-bottom p-2 bg-white w-40">
                            <img src="https://urcxbufxcebfgrsfvmsj.supabase.co/storage/v1/object/public/my%20pacar/IMG-20250502-WA0070.jpg" 
                                 class="w-full h-auto filter sepia-[0.3] contrast-110" 
                                 alt="Featured Memory">
                            <div class="mt-2 text-center">
                                <span class="scrap-text">Fig 2.1: Target Acquired</span>
                            </div>
                        </div>
                    </div>

                    <!-- Decorative Stickers/Stamps -->
                    <div class="absolute top-0 right-4 w-12 h-12 border-2 border-red-800 rounded-full flex items-center justify-center transform rotate-12 opacity-70 z-20">
                        <span class="text-[6px] font-bold text-red-800 text-center leading-tight">MARCH<br>30<br>2026</span>
                    </div>
                </div>

                <div id="calendar-grid" class="grid grid-cols-7 gap-1 text-[11px] text-center p-4 bg-white/50 border border-black/10 relative z-10 shadow-sm">
                    <!-- Calendar injected by JS -->
                </div>
                
                <div class="radar-box relative z-10 bg-[#f2ecd9]/80 backdrop-blur-sm p-2 mt-4 border border-black/5">
                    <div class="monitor-line">
                        <div class="wave-pulse"></div>
                    </div>
                    <div class="data-readout uppercase mt-2">
                        <div>Target: Aristia F.</div>
                        <div>Coord: 30.0326.N</div>
                        <div>Status: Critical Path</div>
                        <div>Signal: Strong 100%</div>
                    </div>
                    <p class="text-[7px] opacity-60 mt-2 text-justify font-serif italic">
                        "Pemantauan transmisi otomatis diaktifkan. Seluruh sistem sinkron dengan detak waktu target."
                    </p>
                </div>
            </section>

            <!-- Halaman 4: Surprise (Shifted) -->
            <section class="page-module" id="mod-4">
                <div id="candle-stage">
                    <div class="candle">
                        <div class="candle-glow"></div>
                        <div class="flame" onclick="DossierSystem.extinguish()"></div>
                    </div>
                    <p class="candle-hint">Tap flame to initiate</p>
                </div>
                
                <div class="torn-paper p-6 bg-[#fdfbf7] shadow-lg h-full relative">
                    <div class="tape-strip" style="top: -15px; left: 50%; transform: translateX(-50%) rotate(2deg);"></div>
                    <div class="tape-strip" style="bottom: -15px; right: 20px; transform: rotate(-5deg);"></div>
                    
                    <div class="flex justify-between items-end mb-8 opacity-60 border-b border-black/10 pb-2">
                        <h2 class="text-[9px] font-bold uppercase tracking-widest font-serif text-red-900">Internal Memo: Confidential</h2>
                        <span class="text-[8px] font-mono bg-black/5 px-1">LOG-ID: 300326</span>
                    </div>
                    
                    <div id="typewriter-output" class="relative z-10"></div>
                    
                    <div id="wax-seal-area" class="wax-seal-decoration mt-auto">
                        <div class="newspaper-fragment" style="bottom: 10px; left: -10px; transform: rotate(5deg); width: 80px; z-index: 0;">
                            <h4>VERIFIED</h4>
                            <p>Otentikasi biometrik selesai.</p>
                        </div>
                        
                        <div class="relative z-10 flex flex-col items-center">
                            <div class="red-ribbon shadow-sm"></div>
                            <div class="wax-seal shadow-md"></div>
                            <div class="verification-grid mt-4 bg-white/50 p-2 border border-black/5">
                                <div class="bio-info">
                                    <div class="bio-row">AUTH: <span class="bio-val">OPR_N</span></div>
                                    <div class="bio-row">SESS: <span class="bio-val">AF-17</span></div>
                                    <div class="bio-row">SIG: <span class="bio-val">ENCR</span></div>
                                </div>
                                <div class="retro-qr-graphic opacity-60"></div>
                            </div>
                        </div>
                        
                        <div class="footer-shred mt-4"></div>
                        <p class="text-[7px] opacity-30 uppercase tracking-[0.4em] -mt-2 text-center">Official Archive Termination</p>
                    </div>
                </div>
            </section>

            <!-- Halaman 5: Chat Terminal (Shifted) -->
            <section class="page-module" id="mod-5">
                <div class="torn-paper p-1 bg-[#f0f0f0] shadow-2xl h-full flex flex-col rotate-[0.5deg]">
                    <div class="tape-strip" style="top: -10px; left: 10px; transform: rotate(-10deg);"></div>
                    <div class="tape-strip" style="top: -10px; right: 10px; transform: rotate(10deg);"></div>
                    
                    <div class="bg-[#1a1a1a] text-green-500 p-4 flex-1 flex flex-col font-mono text-[10px] relative overflow-hidden border-4 border-gray-300 shadow-inner">
                        <!-- CRT Scanline Overlay -->
                        <div class="absolute inset-0 pointer-events-none opacity-10 bg-[linear-gradient(rgba(18,16,16,0)_50%,rgba(0,0,0,0.25)_50%),linear-gradient(90deg,rgba(255,0,0,0.06),rgba(0,255,0,0.02),rgba(0,0,255,0.06))] bg-[length:100%_2px,3px_100%] z-20"></div>
                        
                        <div class="flex justify-between items-center mb-4 border-b border-green-900/50 pb-2 relative z-30">
                            <h2 class="font-bold uppercase tracking-widest animate-pulse">Terminal Comms</h2>
                            <button onclick="DossierSystem.openModal()" class="text-red-500 hover:text-red-400 font-bold uppercase underline decoration-dotted">Purge Logs</button>
                        </div>
                        
                        <div id="msg-display" class="relative z-30 flex-1 overflow-y-auto space-y-2 pr-2 scrollbar-thin scrollbar-thumb-green-900 scrollbar-track-transparent"></div>
                        
                        <div class="mt-4 pt-4 border-t border-green-900/50 relative z-30">
                            <div class="identity-toggle mb-2 border border-green-900/30 inline-flex">
                                <div id="btn-n" onclick="DossierSystem.setSender('N')" class="toggle-btn text-green-500 hover:bg-green-900/20 active">OPR_N</div>
                                <div id="btn-aristia" onclick="DossierSystem.setSender('Aristia')" class="toggle-btn text-green-500 hover:bg-green-900/20">SUB_A</div>
                            </div>
                            <div class="flex gap-2">
                                <input type="text" id="msg-field" placeholder="Input transmission..." class="flex-1 bg-black border-b border-green-700 text-green-400 outline-none py-2 px-1 placeholder-green-900" autocomplete="off">
                                <button onclick="DossierSystem.send()" class="bg-green-900/30 text-green-400 border border-green-700 px-4 py-2 uppercase font-bold hover:bg-green-900/50 transition-colors">Send</button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="absolute -bottom-8 left-0 w-full flex justify-center">
                        <div class="newspaper-fragment transform rotate-[-2deg] shadow-lg">
                            <h4>SYSTEM STATUS</h4>
                            <p>Koneksi aman. Enkripsi end-to-end aktif.</p>
                        </div>
                    </div>
                </div>
            </section>
        </div>

        <footer class="p-4 border-t border-black/5 flex justify-between items-center text-[8px] opacity-40 font-bold tracking-widest uppercase">
            <div class="flex items-center">
                <span id="back-nav-btn" onclick="DossierSystem.prev()">[ BACK ]</span>
                <span>Dossier Cryptography v1.15</span>
            </div>
            <span id="center-stamp">AUTHORIZED ACCESS ONLY</span>
            <span id="page-num">1 / 5</span>
        </footer>
    </main>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="/supabase.js"></script>
    <script>
        const DossierSystem = {
            index: 0,
            currentSender: 'N',
            isTyping: false,
            candleBlown: false,

            init() {
                // Calendar Injection
                const cal = document.getElementById('calendar-grid');
                const days = ['S','S','R','K','J','S','M'];
                days.forEach(d => {
                    const div = document.createElement('div');
                    div.className = 'font-bold opacity-30 mb-2';
                    div.innerText = d;
                    cal.appendChild(div);
                });
                for(let i=1; i<=31; i++) {
                    const div = document.createElement('div');
                    div.className = (i===30?'date-highlight':'') + ' p-2';
                    div.innerText = i;
                    cal.appendChild(div);
                }

                document.getElementById('pin-field').oninput = (e) => {
                    if(e.target.value === "300326") this.runConstellationTransition();
                };
                
                supabaseClient.channel('messages_channel')
                    .on('postgres_changes', { event: '*', schema: 'public', table: TABLE_NAME }, () => this.loadMsgs())
                    .subscribe();
                
                this.render();
                document.getElementById('msg-field').addEventListener('keypress', (e) => { if(e.key==='Enter') this.send(); });
            },

            showPin() {
                document.getElementById('init-screen').style.display = 'none';
                document.getElementById('pin-screen').style.display = 'block';
                document.getElementById('pin-field').focus();
            },

            runConstellationTransition() {
                const loader = document.getElementById('constellation-loader');
                loader.style.display = 'flex';
                setTimeout(() => loader.style.opacity = '1', 10);
                setTimeout(() => {
                    loader.style.opacity = '0';
                    this.unlock();
                    setTimeout(() => loader.style.display = 'none', 500);
                }, 2500);
            },

            unlock() {
                const authModule = document.getElementById('auth-module');
                authModule.style.opacity = '0';
                setTimeout(() => { authModule.style.display = 'none'; }, 800);
            },

            setSender(name) {
                this.currentSender = name;
                document.getElementById('btn-n').classList.toggle('active', name === 'N');
                document.getElementById('btn-aristia').classList.toggle('active', name === 'Aristia');
            },

            render() {
                document.querySelectorAll('.page-module').forEach((m, i) => m.classList.toggle('active', i === this.index));
                document.getElementById('page-num').innerText = `${this.index + 1} / 6`;
                
                const backBtn = document.getElementById('back-nav-btn');
                const centerStamp = document.getElementById('center-stamp');

                if (this.index === 5) {
                    backBtn.style.display = 'inline-block';
                    centerStamp.style.display = 'none';
                    this.loadMsgs();
                } else {
                    backBtn.style.display = 'none';
                    centerStamp.style.display = 'inline-block';
                }

                if(this.index === 4 && !this.candleBlown) {
                    document.getElementById('candle-stage').style.display = 'flex';
                    document.getElementById('candle-stage').style.opacity = '1';
                }
            },

            extinguish() {
                const flash = document.getElementById('flash-overlay');
                flash.classList.add('flash-active');
                
                setTimeout(() => {
                    document.getElementById('candle-stage').style.opacity = '0';
                    setTimeout(() => {
                        document.getElementById('candle-stage').style.display = 'none';
                        this.candleBlown = true;
                        this.type();
                    }, 1000);
                    flash.classList.remove('flash-active');
                }, 400); 
            },

            next() { if(this.index < 5) { this.index++; this.render(); } },
            prev() { if(this.index > 0) { this.index--; this.render(); } },

            type() {
                if(this.isTyping) return;
                this.isTyping = true;
                const out = document.getElementById('typewriter-output');
                const seal = document.getElementById('wax-seal-area');
                const page3 = document.getElementById('mod-4');
                const txt = "Di hari yang luar biasa spesial ini, aku ingin kamu tahu betapa berartinya setiap detik kehadiranmu bagi duniaku. Selamat ulang tahun yang ke-17, sayangku.\n\nTujuh belas adalah awal dari petualangan yang lebih dewasa, lebih menantang. Aku akan tetap di sini, di sisimu, memastikan setiap memori kita tersimpan dengan aman dalam arsip rahasia ini.\n\nStay wonderful, sayangku. Happy 17th!";
                out.innerText = ""; 
                let i = 0;
                seal.style.opacity = "0";

                const intrvl = setInterval(() => {
                    out.innerText += txt[i]; 
                    i++;
                    if(i >= txt.length) { 
                        clearInterval(intrvl); 
                        this.isTyping = false;
                        setTimeout(() => { 
                            page3.classList.add('victorian-bg'); 
                            seal.style.opacity = "1"; 
                        }, 500);
                    }
                }, 45); 
            },

            async loadMsgs() {
                try {
                    const { data, error } = await supabaseClient.from(TABLE_NAME).select('*').order('created_at', { ascending: true });
                    if (error) throw error;
                    this.renderMsgs(data);
                } catch (err) {
                    console.error('loadMsgs failed:', err);
                }
            },

            renderMsgs(data) {
                const box = document.getElementById('msg-display');
                if(!box) return;
                box.innerHTML = (data && data.length > 0) ? data.map(m => `
                    <div class="message-bubble ${m.sender === 'N' ? 'msg-n' : 'msg-aristia'}">
                        <span class="block text-[6px] font-bold opacity-40 mb-1 uppercase">${m.sender}</span>
                        <div>${m.content}</div>
                    </div>
                `).join('') : '<p class="text-center opacity-20 py-10 italic text-[9px]">Channel empty.</p>';
                box.scrollTop = box.scrollHeight;
            },

            async send() {
                const f = document.getElementById('msg-field');
                if(!f || !f.value.trim()) return;
                const content = f.value.trim();
                f.value = '';
                try {
                    await supabaseClient.from(TABLE_NAME).insert([{ content: content, sender: this.currentSender }]);
                    this.loadMsgs();
                } catch (err) {
                    console.error('send() error:', err);
                }
            },

            openModal() { document.getElementById('delete-modal').style.display = 'flex'; },
            closeModal() { document.getElementById('delete-modal').style.display = 'none'; },

            async confirmPurge() {
                if (confirm("WARNING: Permanent deletion of all transmission logs. Proceed?")) {
                    try {
                        await supabaseClient.from(TABLE_NAME).delete().neq('id', -1);
                        this.loadMsgs(); 
                        this.closeModal();
                    } catch(e) {
                        console.error("Purge error", e);
                    }
                }
            }
        };

        window.DossierSystem = DossierSystem;
        DossierSystem.init();
    </script>
  </body>
</html>

